---
title: 13、函数之闭包
categories: 基础知识与数据类型
toc: true
---
# `闭包`
**函数执行会形成一个私有的作用域，保护私有变量不受外部影响，从外部拿不到里面的变量，此时我们可以理解为私有作用域把私有变量保护了起来，这种保护机制称之为'闭包'。由方法运行而产生的私有作用域就叫闭包，为了让变量更安全。闭包是一种机制而不是某种形式；**
闭包面试总结：
闭包就是连接私有作用域和外部作用域之间的一座桥梁，它不仅能保护私有变量不受外界干扰，还能保存一些内容，而且还能把私有作用域中的东西拿到外部使用。
## `如果我想在外部使用闭包中的值怎么办？`
1.在闭包中设置返回值，在外部声明一个变量接收。
2.把闭包中的值赋值给window的一个属性。
## `闭包的作用`
**1.保护**
形成私有作用域，保护里面的私有变量不受外界的干扰，真实项目中，我们利用这种保护机制，实现团队协作开发（避免了多人同一个命名，导致代码冲突的问题）
 + jQuery：常用的JS类库，提供了很多项目中常用的方法（兼容所有浏览器）
 + Zepto：小型JQ，专门为移动端开发准备的
 + 用闭包代替全局变量
 +
```javascript
 //JQ代码片段
(funciton(window)){
	var jQuery=function(){
			....
	}
	....
	window.jQuery=window.$=jQuery;
}(window);
jQery()
$()

//Zepto代码片段
var Zepto=(function(){
	var Zepto=funciton(){
		...
	};
	....
	return Zepto;
})();
var $=Zepto
Zepto();
$();
```
真实项目中，我们利用这种保护机制，实现团队协作开发（避免了多人同一个命名，导致代码冲突的问题）
```javascript
 //A
(funciton()){
	//A写的代码
	function fn(){
			....
	}
	....
	window.fn=fn;
}();
//B
(function(){
	//B写的代码
	funciton fn(){
		...
	};
	//B想要调取A写的fn
	window.fn();
})();
```
**2.保存**
函数执行形成一个私有作用域，函数执行完成，形成的这个栈内存一般情况都会自动释放
但是当栈内存中的内容被栈内存以外的其他东西（变量/元素的事件）占用了，那么这个栈内存就不能被释放掉，也就形成了不销毁的私有作用域（里面的私有变量也不会销毁）；
应用：高级单例模式，封装插件；
